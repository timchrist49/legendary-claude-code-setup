# Claude Code Operating Rules

> This file configures Claude Code behavior. Copy to `~/.claude/CLAUDE.md` or project root.
> Generated by Claude Code Super Setup

## Prime Directive

Ship production-ready code for MVPs quickly with correct dependencies, correct docs, and minimal hallucination.

## Default Workflow

1. **Clarify requirements** by writing a short spec (bullets)
2. **Propose an implementation plan** (steps + milestones)
3. **Execute in small batches** with verification at each step
4. **Add tests** where it makes sense (TDD preferred for libraries/core logic)
5. **Keep changes small** and commit-ready

## Documentation Source of Truth

- **ALWAYS use Context7 MCP** for:
  - Library/framework APIs
  - Setup steps and configuration formats
  - Dependency versions
  - "How-to" documentation
- If Context7 conflicts with local code, prefer the project's actual package versions and lockfiles
- When uncertain, explicitly verify with official docs before finalizing code

## Web Search & Research

- Use **Tavily MCP** for:
  - Searching the web for current information
  - Finding up-to-date news and articles
  - Researching topics beyond training data
  - Extracting content from specific URLs
  - Crawling websites for structured data

## Browser Automation

- Use **Browserbase MCP** for:
  - Interactive web research
  - Login-required flows (when permitted)
  - Data extraction and scraping
  - Taking screenshots for verification

- Use **Playwright MCP** for:
  - Repeatable UI tests
  - Automated browser workflows
  - Local browser control

## Anti-Hallucination Protocol

- If a claim is uncertain or high-impact (security, deployment, billing, auth):
  1. Run **Strawberry (Pythea)** hallucination checks
  2. Verify with Context7 or official documentation
  3. Cite sources when making technical claims

- Before finalizing any code that:
  - Handles authentication or authorization
  - Processes payments or billing
  - Deploys to production
  - Modifies security-sensitive configurations

  â†’ Run verification checks first

## Context Hygiene

- Use **GSD commands** for large builds to avoid context rot
- When working on large repos:
  - Summarize decisions regularly
  - Update README or ADR notes
  - Keep context focused on current task

## Memory

- Use **episodic-memory plugin** to recall prior decisions and patterns when relevant
- Reference past conversations for consistency

## Output Style

- Provide **exact commands** to run
- Use **exact file paths** (no ambiguity)
- Give **minimal diff-style instructions** for changes
- Include **"what to run"** and **"expected output"** for verification
- Prefer small, incremental changes over large refactors

## Code Quality Standards

- Follow project's existing code style
- Write self-documenting code (clear names, simple logic)
- Add comments only where intent is non-obvious
- Handle errors appropriately for the context
- Consider edge cases but don't over-engineer

## Git Workflow

- Write clear, descriptive commit messages
- Keep commits atomic (one logical change per commit)
- Reference issue numbers when applicable

---

## Tool Usage Reference

### Context7 (Documentation)
```
"Use Context7 to find the latest docs for [library/framework]"
"What's the correct way to configure [X] according to Context7?"
```

### Tavily (Web Search)
```
"Search the web for the latest [topic]"
"Use Tavily to find current information about [subject]"
"Extract content from [URL] using Tavily"
```

### Browserbase (Cloud Browser)
```
"Use Browserbase to open [URL] and extract [data]"
"Take a screenshot of [page] using Browserbase"
```

### Playwright (Browser Automation)
```
"Use Playwright MCP to automate [workflow]"
"Run a browser test for [feature] with Playwright"
```

### Strawberry (Verification)
```
"Run Strawberry hallucination check on this plan"
"Verify my reasoning with Strawberry before implementing"
```

### GSD (Workflow)
```
/gsd:spec - Create a specification
/gsd:build - Execute a build with context management
```

### Superpowers (Planning)
```
/superpowers:brainstorm - Interactive design refinement
/superpowers:write-plan - Create implementation plan
/superpowers:execute-plan - Execute plan in batches
```

---

*Last updated: {{DATE}}*
*Generated by Claude Code Super Setup*
